// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["views"]
}

datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  //shadowDatabaseUrl    = env("SHADOW_URL")


  referentialIntegrity = "prisma"
}

enum Auth {
  user
  admin
  kitchen
  bar
}

model User {
  id        String  @id @default(cuid())
  firstName String
  lastName  String
  alias     String?
  password  String  @unique
  auth      String  @default("user")
  locked    Boolean @default(false)
  Categories Categories[]
  Task      Task[]
  Products  Products[]

  @@unique([firstName, lastName, password])
}
model Products{
  id           String    @id @default(cuid())
  product_name String
  product_des  String
  product_img  String
  status       String
  brand        String?
  amount       String
  discount     String?
  category_id  String
  createdBy    String
  createdAt    DateTime  @default(now())
  lastEdited   DateTime  @updatedAt
  creatorId    User  @relation(fields: [createdBy], references: [id])
  categoryId   Categories  @relation(fields: [category_id], references: [id])


  @@unique([id])

}

model Task {
  id           String    @id @default(cuid())
  name         String
  description  String
  createdAt    DateTime  @default(now())
  lastEdited   DateTime  @updatedAt
  priority     Int
  assignedToId String
  assignedToId1 User  @relation(fields: [assignedToId], references: [id])
  createdBy    String
  status       String
  SubTask      SubTask[]
  
  @@unique([id])

}




model SubTask {
  id           String   @id @default(cuid())
  task_id      String
  name         String
  description  String
  createdAt    DateTime @default(now())
  lastEdited   DateTime @updatedAt
  priority     Int
  assignedToId String
  task_id1     Task     @relation(fields: [task_id], references: [id])
  createdBy    String
  status       String
  @@unique([id])

}


model Day {
  id             String   @id @default(cuid())
  startingCovers Int
  endingCovers   Int
  date           DateTime @default(now())
  totalSales     Int
  totalTips      Int
  weather        String
  notes          String
}
model Categories{
  id             String   @id @default(cuid())
  category_name  String
  category_desc  String
  status         Int
  createdBy      String    
  userRelation      User     @relation(fields: [createdBy], references: [id]) 
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt
  Products     Products[]


}
model Priority {
  id          String   @id @default(cuid())
  name        String
  description String
  createdAt   DateTime @default(now())
  lastEdited  DateTime @updatedAt
}

//  DATABASE VIEWS,
view task_vw {
  id           String    @id @default(cuid())
  name         String
  description  String
  createdAt    DateTime  @default(now())
  lastEdited   DateTime  @updatedAt
  priority     Int
  assignedToId String
  createdBy    String
  status       String
  AsigneeName  String
}
view category_vw {
  id             String   @id @default(cuid())
  category_name  String
  category_desc  String
  status         Int
  createdBy      String    
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt
  CreatorName    String
}